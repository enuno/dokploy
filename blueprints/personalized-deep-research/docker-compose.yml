services:
  deep-research-web:
    image: anotia/deep-research-web:1.0.0
    restart: always
    environment:
      NODE_ENV: production
      DOMAIN: ${DOMAIN:?Set your domain (e.g., example.com)}
    networks:
      - deep-research-net
      - dokploy-network
    labels:
      - "traefik.enable=true"
      - "traefik.http.routers.deep-research-web.rule=Host(`${DOMAIN}`)"
      - "traefik.http.routers.deep-research-web.entrypoints=websecure"
      - "traefik.http.routers.deep-research-web.tls.certresolver=letsencrypt"
      - "traefik.http.services.deep-research-web.loadbalancer.server.port=3000"
      - "traefik.docker.network=dokploy-network"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:3000/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 30s

networks:
  deep-research-net:
    driver: bridge
  dokploy-network:
    external: true
