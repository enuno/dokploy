services:
  # =============================================================================
  # dashdot - Internal Server Dashboard for Homarr Integration
  # https://github.com/MauriceNino/dashdot
  # =============================================================================
  # This template is for INTERNAL USE ONLY - not publicly accessible.
  # Deploy in the same Dokploy project as Homarr.
  # Homarr connects via internal URL: http://dashdot:3001
  # =============================================================================
  dashdot:
    image: mauricenino/dashdot:6.2.4
    restart: always
    privileged: true
    volumes:
      # Read-only mount of host filesystem for system metrics
      - /:/mnt/host:ro
      # Timezone configuration
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    environment:
      # =======================================================================
      # Widget Configuration
      # =======================================================================
      DASHDOT_WIDGET_LIST: ${DASHDOT_WIDGET_LIST:-os,cpu,storage,ram,network}
      # =======================================================================
      # Display Settings
      # =======================================================================
      DASHDOT_PAGE_TITLE: ${DASHDOT_PAGE_TITLE:-Server Stats}
      DASHDOT_USE_IMPERIAL: ${DASHDOT_USE_IMPERIAL:-false}
      DASHDOT_ALWAYS_SHOW_PERCENTAGES: ${DASHDOT_ALWAYS_SHOW_PERCENTAGES:-true}
      DASHDOT_SHOW_DASH_VERSION: "none"
      # =======================================================================
      # Server Configuration
      # =======================================================================
      DASHDOT_PORT: "3001"
      DASHDOT_DISABLE_INTEGRATIONS: "false"
      # =======================================================================
      # Timezone
      # =======================================================================
      TZ: ${TZ:-UTC}
    networks:
      - dokploy-network
    # No Traefik labels - internal access only via Docker network
    labels:
      - "traefik.enable=false"
    healthcheck:
      test: ["CMD", "wget", "-q", "--spider", "http://localhost:3001/"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 15s

# =============================================================================
# Networks
# =============================================================================
networks:
  dokploy-network:
    external: true
